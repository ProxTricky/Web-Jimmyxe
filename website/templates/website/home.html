{% extends 'website/base.html' %}
{% load static %}

{% block content %}
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">JimmyXE</h1>
        <p class="hero-subtitle">Streamer & Content Creator</p>
    </div>
</section>

<section class="stream-section" id="stream">
    <div class="container mx-auto px-4">
        <div class="stream-container">
            <h2 class="stream-title">Stream en Direct</h2>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2">
                    <div class="aspect-w-16 aspect-h-9">
                        <iframe
                            src="https://player.twitch.tv/?channel=twitchjimmyxe&parent=proxtricky.fr"
                            frameborder="0"
                            allowfullscreen="true"
                            scrolling="no"
                            height="100%"
                            width="100%">
                        </iframe>
                    </div>
                </div>
                <div class="lg:col-span-1">
                    <iframe
                        src="https://www.twitch.tv/embed/twitchjimmyxe/chat?parent=proxtricky.fr"
                        frameborder="0"
                        scrolling="no"
                        height="500"
                        width="100%">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="schedule" class="section">
    <div class="container mx-auto px-6">
        <h2 class="section-title">Planning des Streams</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for schedule in schedules %}
                {% if schedule.is_active %}
                <div class="schedule-card">
                    <h3 class="text-xl font-bold mb-2">{{ schedule.day }}</h3>
                    <p class="text-lg mb-2">{{ schedule.time|time:"H:i" }}</p>
                    <p class="text-purple-400 mb-2">{{ schedule.game }}</p>
                    {% if schedule.description %}
                    <p class="text-gray-400">{{ schedule.description }}</p>
                    {% endif %}
                </div>
                {% endif %}
            {% empty %}
                <div class="col-span-3 text-center text-gray-400">
                    Aucun horaire de stream n'est programmé pour le moment.
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<section id="social" class="section bg-opacity-95">
    <div class="container mx-auto px-6">
        <h2 class="section-title">Réseaux Sociaux</h2>
        <div class="social-grid">
            {% for social in social_links %}
                {% if social.is_active %}
                <a href="{{ social.url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                    <i class="fab fa-{{ social.platform }} text-{{ social.platform }}-400"></i>
                    <span>{{ social.get_platform_display }}</span>
                </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</section>

<section id="about" class="section">
    <div class="container mx-auto px-6">
        <h2 class="section-title">À propos</h2>
        <div class="max-w-3xl mx-auto text-center">
            <p class="text-xl leading-relaxed">
                Passionné de jeux vidéo et de partage, je stream régulièrement sur Twitch.
                Rejoignez-moi pour des sessions de gaming, du fun et une communauté exceptionnelle !
            </p>
        </div>
    </div>
</section>

<div class="secret-click" title="Click me 3 times!"></div>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Loading screen
    setTimeout(() => {
        document.querySelector('.loading-overlay').style.opacity = '0';
        setTimeout(() => {
            document.querySelector('.loading-overlay').style.display = 'none';
        }, 500);
    }, 1000);

    // Konami Code
    let konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
    let konamiPosition = 0;

    document.addEventListener('keydown', function(e) {
        if (e.key === konamiCode[konamiPosition]) {
            konamiPosition++;
            if (konamiPosition === konamiCode.length) {
                document.body.classList.add('konami-active');
                setTimeout(() => {
                    document.body.classList.remove('konami-active');
                }, 5000);
                konamiPosition = 0;
            }
        } else {
            konamiPosition = 0;
        }
    });

    // Secret Click
    let secretClicks = 0;
    document.querySelector('.secret-click').addEventListener('click', function() {
        secretClicks++;
        if (secretClicks === 3) {
            this.classList.add('active');
            setTimeout(() => {
                this.classList.remove('active');
                secretClicks = 0;
            }, 3000);
        }
    });

    // Troll Messages
    const trollMessages = [
        "Pas de panique, c'est normal si ça lag",
        "Le stream est pas cassé, c'est voulu",
        "Oui oui, le chat marche",
        "T'as essayé de recharger la page ?",
        "C'est pas un bug, c'est une feature"
    ];

    const streamTitle = document.querySelector('.stream-title');
    let currentMessage = 0;

    setInterval(() => {
        streamTitle.setAttribute('data-tooltip', trollMessages[currentMessage]);
        currentMessage = (currentMessage + 1) % trollMessages.length;
    }, 5000);
});
</script>
{% endblock %}
